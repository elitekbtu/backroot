# AR Coin System Setup Guide

## Обзор

Этот проект реализует систему дополненной реальности (AR) для отображения криптовалютных монет через камеру устройства. Система использует современные веб-технологии для создания иммерсивного AR опыта.

## Технологии

- **React 19** - UI фреймворк
- **Three.js** - 3D графика
- **React Three Fiber** - React интеграция с Three.js
- **React Three XR** - WebXR поддержка
- **AR.js** - AR библиотека для веб
- **TypeScript** - Типизация

## Требования

### Браузеры
- **Chrome на Android** (с ARCore)
- **Safari на iOS 15+** (с ARKit)
- **Edge на Windows** (с WebXR)

### Устройства
- Современный смартфон с поддержкой AR
- Камера с автофокусом
- Гироскоп и акселерометр
- Минимум 4GB RAM

### Сеть
- HTTPS соединение (обязательно для камеры)
- Стабильное интернет соединение

## Установка

### 1. Установка зависимостей

```bash
cd frontend
npm install
```

### 2. Настройка переменных окружения

Создайте файл `.env` в корне проекта:

```env
VITE_API_URL=http://localhost:8000
VITE_GOOGLE_MAPS_API_KEY=your_google_maps_api_key
```

### 3. Запуск в режиме разработки

```bash
npm run dev
```

### 4. Сборка для продакшена

```bash
npm run build
```

## Настройка AR

### 1. Проверка поддержки AR

Откройте `/ar-test` для проверки поддержки AR на вашем устройстве.

### 2. Настройка HTTPS

AR требует HTTPS соединение. Для разработки:

```bash
# Используйте HTTPS в Vite
npm run dev -- --https
```

Или настройте reverse proxy с SSL сертификатом.

### 3. Разрешения камеры

Убедитесь, что браузер имеет разрешение на доступ к камере.

## Использование

### 1. Создание монет

1. Перейдите на страницу AR
2. Нажмите "Add Coin"
3. Заполните данные монеты:
   - **Name**: Название монеты
   - **Symbol**: Символ (BTC, ETH, etc.)
   - **Description**: Описание
   - **AR Model URL**: URL 3D модели (.glb, .gltf)
   - **AR Scale**: Масштаб в AR (1.0 = нормальный размер)
   - **Position**: Позиция в 3D пространстве

### 2. Запуск AR

1. Нажмите "Launch AR"
2. Разрешите доступ к камере
3. Наведите камеру на плоскую поверхность
4. Монеты появятся в AR пространстве

### 3. Взаимодействие

- **Поворот устройства**: Осмотр монет с разных углов
- **Тап по монете**: Показать информацию
- **Движение**: Исследование AR пространства

## Структура проекта

```
frontend/src/
├── components/
│   ├── AR.tsx              # Основной AR компонент
│   ├── ARTest.tsx          # Тест AR возможностей
│   └── Coin3D.tsx          # 3D модель монеты
├── lib/
│   └── ar-utils.ts         # AR утилиты
├── pages/
│   └── AR.tsx              # AR страница управления
└── types/
    └── coin.ts             # Типы данных монет
```

## API Endpoints

### Монеты
- `GET /coins/` - Список монет
- `POST /coins/` - Создать монету
- `PUT /coins/{id}` - Обновить монету
- `DELETE /coins/{id}` - Удалить монету
- `GET /coins/ar` - Монеты для AR

## Производительность

### Оптимизация
- Используется мемоизация для 3D компонентов
- Оптимизированные текстуры и модели
- LOD (Level of Detail) для дальних объектов
- Ограничение количества монет на экране

### Мониторинг
- FPS мониторинг
- Автоматическое снижение качества при низкой производительности
- Предупреждения о проблемах с производительностью

## Отладка

### Общие проблемы

1. **AR не запускается**
   - Проверьте поддержку WebXR
   - Убедитесь в HTTPS соединении
   - Проверьте разрешения камеры

2. **Монеты не отображаются**
   - Проверьте URL 3D моделей
   - Убедитесь в корректности формата (.glb, .gltf)
   - Проверьте настройки позиции

3. **Низкая производительность**
   - Уменьшите количество монет
   - Снизьте качество текстур
   - Закройте другие приложения

### Логи

Откройте Developer Tools для просмотра логов:
- Ошибки загрузки моделей
- Проблемы с WebXR
- Предупреждения производительности

## Безопасность

- Все 3D модели проверяются на валидность URL
- Ограничение размера загружаемых файлов
- Валидация входных данных
- HTTPS обязательно для AR функциональности

## Поддержка

### Тестирование
- Chrome DevTools для отладки
- WebXR Emulator для тестирования
- Различные устройства и браузеры

### Мониторинг
- Отслеживание ошибок AR
- Статистика использования
- Производительность в реальном времени

## Дополнительные ресурсы

- [WebXR Specification](https://www.w3.org/TR/webxr/)
- [Three.js Documentation](https://threejs.org/docs/)
- [React Three Fiber](https://docs.pmnd.rs/react-three-fiber)
- [AR.js Documentation](https://ar-js-kiko.github.io/AR.js-Docs/)

## Лицензия

MIT License - см. файл LICENSE для деталей.
